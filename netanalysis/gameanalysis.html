---
layout: default
title: CSC 466 | Game Analysis
---
<h3>Using Clumsy to Force Unfavorable Latency</h3>

<p>
  Clumsy is an open-source tool that uses the WinDivert library to interact with packets.
  Clumsy can be found <a href="https://jagt.github.io/clumsy/" target="_blank">here</a>.
  A demo of Clumsy's interface can be seen in the following GIF.
</p>
  <img src="https://jagt.github.io/clumsy/clumsy-demo.gif" alt="Clusmy in action" />
<p>
  Amongst other features, this software can perform the following functions on Windows systems:
  <ul>
    <li>forcing lag</li>
    <li>dropping packets</li>
    <li>throttling connections</li>
    <li>duplicating packets</li>
    <li>sending packets out-of-order</li>
    <li>tampering with checksums</li>
  </ul>
  To force additional latency and controlled packet loss during gameplay, Clumsy was used.
</p>

<h3> Analysis on Skullgirls </h3>

<ul>
  <li>solely uses peer-to-peer for online play</li>
  <li>uses GGPO to assist in netplay</li>
  <li>in lobbies with repeated matches, host of match is alternated</li>
  <li>Tests were conducted with a peer in Australia to see how much stress GGPO could handle</li>
  <li>Tests with notable results below</li>
  <!-- insert video links here -->
  <ol>
    <li><a href="https://www.youtube.com/watch?v=92_V-KW-DW8" target="_blank">223ms, frame_delay=8,8; game felt "smooth"</a></li>
    <li><a href="https://www.youtube.com/watch?v=w2IBQg-RInk" target="_blank">243ms, frame_delay=0,0; longer load times</a></li>
    <li><a href="https://www.youtube.com/watch?v=7fbcgZsshkY" target="_blank">380ms, frame_delay=8,0; longer load times and match ending sound is duplicated at end</a></li>
    <ul>
      <li><a href="https://www.youtube.com/watch?v=6msDsCVpnbs" target="_blank">Match end discrepancy mentioned above</a></li>
    </ul>
    <li><a href="https://www.youtube.com/watch?v=cFtmsgHmNpo" target="_blank">400ms, frame_delay=0,0; lots of frame skipping and sound duplication</a></li>
    <li><a href="https://www.youtube.com/watch?v=MJy8tZn7qMo" target="_blank">223ms, frame_delay=0,0; packet loss of 20% forced on my end, result is "my" character being unresponsive</a></li>
    <li><a href="https://www.youtube.com/watch?v=59EbeD4_ml4" target="_blank">320ms, frame_delay=5,0; game is smoother but slow-paced with infrequent input drops</a></li>
  </ol>
</ul>

<h3> Analysis on Street Fighter V </h3>

<ul>
  <li>on startup, following servers sent to Steam client as JSON message</li>
  <ul>
    <li>"Game": {"DNS": "api.prod.capcomfighters.net", "Port": "80"}</li>
    <li>"STUN1": {"DNS": "stun1.prod.capcomfighters.net", "Port": "23478"}</li>
    <li>"STUN2": {"DNS": "stun1.prod.capcomfighters.net","Port": "33478"}</li>
    <li>"Message": {"DNS": "message.prod.capcomfighters.net","Port": "20002"}</li>
    <li>"File": {"DNS": "fdlcdn.prod.capcomfighters.net","Port": "80"}</li>
    <li>"Proud": {"DNS": "209.58.132.134","Port": "30850"}</li>
  </ul>
  <li>uses combination of server/client for authentication and peer-to-peer for lobby play</li>
  <li>while sitting in lobby, dgrams sent back and forth between lobby players with following format:</li>
  <!-- image of wireshark here -->
  <li>while sitting in lobby, heatmap in background being periodically updated from fileserver through plaintext HTTP requests</li>
</ul>
